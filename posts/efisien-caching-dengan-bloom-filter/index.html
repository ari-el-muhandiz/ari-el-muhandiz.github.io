<!DOCTYPE html><html lang="id" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="d ago"><meta name="hour-prompt" content="hr ago"><meta name="minute-prompt" content="min ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Efisien Caching dengan Bloom Filter" /><meta property="og:locale" content="id" /><meta name="description" content="Efisien Caching dengan Bloom Filter" /><meta property="og:description" content="Efisien Caching dengan Bloom Filter" /><link rel="canonical" href="https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/" /><meta property="og:url" content="https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/" /><meta property="og:site_name" content="Ari Firmanto" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-08-21T23:39:47+07:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Efisien Caching dengan Bloom Filter" /><meta name="twitter:site" content="@arifirmanto4" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"Efisien Caching dengan Bloom Filter","dateModified":"2021-08-21T23:39:29+07:00","datePublished":"2021-08-21T23:39:47+07:00","description":"Efisien Caching dengan Bloom Filter","url":"https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/"},"@context":"https://schema.org"}</script><title>Efisien Caching dengan Bloom Filter | Ari Firmanto</title><link rel="apple-touch-icon" sizes="180x180" href="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/favicon.ico"><meta name="apple-mobile-web-app-title" content="Ari Firmanto"><meta name="application-name" content="Ari Firmanto"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang=""><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/ari-firmanto.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Ari Firmanto</a></div><div class="site-subtitle font-italic">Hi, saya Ari. Saya software engineer yang tinggal di Surabaya.</div></div><ul class="w-100"></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"><div class="site-subtitle" style="margin:0;margin-bottom:5px;font-size:80%;min-height:0">Anda bisa menghubungi saya melalui:</div><a href="https://github.com/ari-el-muhandiz" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['arifirmanto','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/ari-firmanto-981a443a/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Efisien Caching dengan Bloom Filter</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Efisien Caching dengan Bloom Filter</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Ari Firmanto </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Aug 21, 2021, 11:39 PM +0700" >Aug 21<i class="unloaded">2021-08-21T23:39:47+07:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sat, Aug 21, 2021, 11:39 PM +0700" >Aug 21<i class="unloaded">2021-08-21T23:39:29+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="388 words">2 min read</span></div></div><div class="post-content"><h2 id="efisien-caching-dengan-bloom-filter">Efisien Caching dengan Bloom Filter</h2><p class="text-justify">Caching bisa meningkatkan performa aplikasi yang <em>heavy read</em>, karena mengurangi pembacaan ke IO seperti <em>database</em>. Bloom filter adalah struktur data yang dirancang untuk memberi tahu Anda, dengan cepat dan hemat memori, apakah suatu elemen ada dalam filter. Dalam Bloom filter ada kemungkinan terjadi <em>false positive</em>, tetapi tidak untuk <em>false negative</em>. Dengan kata lain, hasil yang dikembalikan adalah data “mungkin dalam set” atau “pasti tidak dalam set”.</p><p class="text-justify">Bloom filter memerlukan lebih dari fungsi hash dalam algoritmanya. Contoh – Misalkan kita ingin memasukkan “demo” ke dalam filter dengan menggunakan 2 fungsi hash dan array dengan panjang 10 bit, dimana semuanya disetel dengan nilai 0 awalnya. Adapun langkah - langkahnya sebagai berikut:</p><ul><li>Pertama kita akan menghitung hash sebagai berikut:<div lang="plaintext" class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>h1("demo") % 10 = 1
h2("demo") % 10 = 2
</pre></table></code></div></div><p><img data-proofer-ignore data-src="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/bloom-filter-caching-1.png" alt="Bloom Filter 1" /></p><li>Mapping hash yang diperoleh kedalam array. Untuk mengecek apakah data ada ddidalam filter maka semua nilai harus 1, jika tidak maka data tidak ada di dalam filter. Sebagai contoh sebagai berikut:<div lang="plaintext" class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>h1("test") % 10 = 3
h2("test") % 10 = 2
</pre></table></code></div></div><p>kata “test” mempunyai nilai value 3 dan 2, akan tetapi di dalam array index 3 memiliki value 0 sehingga kata tersebut tidak exist di dalam filter <img data-proofer-ignore data-src="https://blog-firmantoari.s3.ap-southeast-1.amazonaws.com/bloom-filter-caching-2.png" alt="Bloom Filter 2" /></p></ul><p class="text-justify">Sebagai demo, saya akan membuat pengecekan username apakah exist di dalam filter dimana untuk filter saya akan menggunakan memory cache. Adapun framework yang digunakan adalah spring boot (JAVA). Untuk kodenya sebagai berikut:</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="o">&lt;</span><span class="n">dependency</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">groupId</span><span class="o">&gt;</span><span class="n">com</span><span class="o">.</span><span class="na">google</span><span class="o">.</span><span class="na">guava</span><span class="o">&lt;/</span><span class="n">groupId</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">artifactId</span><span class="o">&gt;</span><span class="n">guava</span><span class="o">&lt;/</span><span class="n">artifactId</span><span class="o">&gt;</span>
	<span class="o">&lt;</span><span class="n">version</span><span class="o">&gt;</span><span class="mf">29.0</span><span class="o">-</span><span class="n">jre</span><span class="o">&lt;/</span><span class="n">version</span><span class="o">&gt;</span>
  <span class="o">&lt;/</span><span class="n">dependency</span><span class="o">&gt;</span>
</pre></table></code></div></div><p>Snippet diatas adalam dependency package dimana saya menggunakan library <a href="https://mvnrepository.com/artifact/com.google.guava/guava/11.0">guava</a></p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.example.demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.google.common.hash.BloomFilter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.hash.Funnels</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.http.MediaType</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.util.MultiValueMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.GetMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PostMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestBody</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">BloomFilter</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">filter</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">HelloController</span><span class="o">()</span> <span class="o">{</span>
       <span class="k">this</span><span class="o">.</span><span class="na">filter</span> <span class="o">=</span> <span class="nc">BloomFilter</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="nc">Funnels</span><span class="o">.</span><span class="na">unencodedCharsFunnel</span><span class="o">(),</span> <span class="mi">100</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Greetings from Spring Boot!"</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@PostMapping</span><span class="o">(</span>
            <span class="n">path</span> <span class="o">=</span> <span class="s">"/add-username"</span><span class="o">,</span>
            <span class="n">consumes</span> <span class="o">=</span> <span class="o">{</span><span class="nc">MediaType</span><span class="o">.</span><span class="na">APPLICATION_FORM_URLENCODED_VALUE</span><span class="o">})</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">addUsername</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="nc">MultiValueMap</span> <span class="n">paramMap</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">filter</span><span class="o">.</span><span class="na">mightContain</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">getFirst</span><span class="o">(</span><span class="s">"username"</span><span class="o">)))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">this</span><span class="o">.</span><span class="na">filter</span><span class="o">.</span><span class="na">put</span><span class="o">((</span><span class="nc">String</span><span class="o">)</span> <span class="n">paramMap</span><span class="o">.</span><span class="na">getFirst</span><span class="o">(</span><span class="s">"username"</span><span class="o">));</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p class="text-justify">line 57 adalah inisialisasi Bloom filter dengan guava. Untuk logic pengecekan dimulai pada line 69 - 72. Data disimpan dalam <em>memory</em>, untuk <em>persistence</em> data bisa menggunakan redis.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/system-design/'>system-design</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"></div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Efisien Caching dengan Bloom Filter - Ari Firmanto&url=https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Efisien Caching dengan Bloom Filter - Ari Firmanto&u=https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Efisien Caching dengan Bloom Filter - Ari Firmanto&url=https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', '')" data-toggle="tooltip" data-placement="top" title=""> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/efisien-caching-dengan-bloom-filter/">Efisien Caching dengan Bloom Filter</a></ul></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div class="post-navigation d-flex justify-content-between"> <span class="btn btn-outline-primary disabled" prompt="previous"><p>-</p></span> <span class="btn btn-outline-primary disabled" prompt="next"><p>-</p></span></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//firmantoari.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'Efisien Caching dengan Bloom Filter'; this.page.url = 'https://ari-el-muhandiz.github.io/posts/efisien-caching-dengan-bloom-filter/'; this.page.identifier = '/posts/efisien-caching-dengan-bloom-filter/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/ari-el-muhandiz">Ari Firmanto</a></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://ari-el-muhandiz.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
